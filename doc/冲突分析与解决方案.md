# ä»£ç å†²çªåˆ†æä¸è§£å†³æ–¹æ¡ˆ

## ğŸ“‹ å¿«é€Ÿå†²çªè¯†åˆ«è¡¨

| å†²çªæ–‡ä»¶/ç›®å½• | å†²çªæˆå‘˜ | å†²çªå†…å®¹ | è§£å†³æ–¹æ¡ˆ |
|--------------|---------|---------|---------|
| `Player.cs` | æˆå‘˜1ï¼ˆè®¿é—®è€…ï¼‰<br>æˆå‘˜1ï¼ˆä¾èµ–æ³¨å…¥ï¼‰<br>æˆå‘˜4ï¼ˆè§‚å¯Ÿè€…ï¼‰<br>æˆå‘˜4ï¼ˆå‘½ä»¤ï¼‰ | æ·»åŠ Acceptæ–¹æ³•<br>ä¿®æ”¹æ„é€ å‡½æ•°<br>æ·»åŠ äº‹ä»¶å‘å¸ƒ<br>ä¿®æ”¹Updateæ–¹æ³• | è®¿é—®è€…ï¼šæ‰©å±•æ–¹æ³•<br>ä¾èµ–æ³¨å…¥ï¼šæœ€åå®Œæˆ<br>è§‚å¯Ÿè€…ï¼šæ–¹æ³•æœ«å°¾æ·»åŠ <br>å‘½ä»¤ï¼šåˆ›å»ºæ–°ç±» |
| `Enemy.cs` | æˆå‘˜1ï¼ˆè®¿é—®è€…ï¼‰<br>æˆå‘˜2ï¼ˆå·¥å‚æ–¹æ³•ï¼‰<br>æˆå‘˜4ï¼ˆè§‚å¯Ÿè€…ï¼‰ | æ·»åŠ Acceptæ–¹æ³•<br>ä¿®æ”¹Awakeæ–¹æ³•<br>æ·»åŠ äº‹ä»¶å‘å¸ƒ | è®¿é—®è€…ï¼šæ‰©å±•æ–¹æ³•<br>å·¥å‚æ–¹æ³•ï¼šæ ‡è®°åŒºåŸŸ<br>è§‚å¯Ÿè€…ï¼šæ–¹æ³•æœ«å°¾æ·»åŠ  |
| `Skills/` | æˆå‘˜2ï¼ˆé€‚é…å™¨ï¼‰<br>æˆå‘˜3ï¼ˆè£…é¥°å™¨ï¼‰<br>æˆå‘˜5ï¼ˆä»£ç†ï¼‰ | åˆ›å»ºISkillæ¥å£<br>åˆ›å»ºEffectsç›®å½•<br>åˆ›å»ºSkillProxy | é€‚é…å™¨ï¼šæ–°æ–‡ä»¶<br>è£…é¥°å™¨ï¼šæ–°ç›®å½•<br>ä»£ç†ï¼šæ–°æ–‡ä»¶ |
| `PlayerState.cs`<br>`EnemyState.cs` | æˆå‘˜2ï¼ˆå·¥å‚æ–¹æ³•ï¼‰<br>æˆå‘˜3ï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰ | ä¿®æ”¹çŠ¶æ€åˆ›å»º<br>ä¿®æ”¹çŠ¶æ€åŸºç±» | å·¥å‚æ–¹æ³•ï¼šå…ˆå®Œæˆ<br>æ¨¡æ¿æ–¹æ³•ï¼šåå®Œæˆ |
| `CharacterStats.cs` | æˆå‘˜3ï¼ˆç­–ç•¥ï¼‰<br>æˆå‘˜4ï¼ˆè§‚å¯Ÿè€…ï¼‰ | ä¿®æ”¹DoDamageæ–¹æ³•<br>å¯èƒ½æ·»åŠ äº‹ä»¶ | ç­–ç•¥ï¼šæ ‡è®°åŒºåŸŸ<br>è§‚å¯Ÿè€…ï¼šæ–¹æ³•æœ«å°¾æ·»åŠ  |

---

## âœ… è§£å†³æ–¹æ¡ˆï¼šæ€ä¹ˆåš

### 1. ä¿®æ”¹ç­–ç•¥ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰

#### ç­–ç•¥Aï¼šåˆ›å»ºæ–°æ–‡ä»¶/æ–°ç›®å½•ï¼ˆæ¨èï¼Œ70%çš„æ¨¡å¼ï¼‰
- âœ… **é€‚é…å™¨**ï¼šåˆ›å»º`ISkill.cs`ã€`SkillAdapter.cs`
- âœ… **è£…é¥°å™¨**ï¼šåˆ›å»º`Skills/Effects/`ç›®å½•
- âœ… **ä»£ç†**ï¼šåˆ›å»º`SkillProxy.cs`
- âœ… **è§‚å¯Ÿè€…**ï¼šåˆ›å»º`Core/Events/`ç›®å½•
- âœ… **å‘½ä»¤**ï¼šåˆ›å»º`PlayerInputHandler.cs`

#### ç­–ç•¥Bï¼šä½¿ç”¨æ‰©å±•æ–¹æ³•ï¼ˆé¿å…ç›´æ¥ä¿®æ”¹ï¼‰
```csharp
// è®¿é—®è€…æ¨¡å¼ - ä½¿ç”¨æ‰©å±•æ–¹æ³•
public static class EntityVisitorExtensions
{
    public static void Accept(this Entity entity, IGameObjectVisitor visitor)
    {
        if (entity is Enemy enemy) visitor.Visit(enemy);
        else if (entity is Player player) visitor.Visit(player);
    }
}
```

#### ç­–ç•¥Cï¼šæ˜ç¡®æ ‡è®°ä¿®æ”¹åŒºåŸŸï¼ˆå¿…é¡»ä¿®æ”¹æ—¶ï¼‰
```csharp
#region Factory Method Pattern - Member2
// æˆå‘˜2çš„ä¿®æ”¹åŒºåŸŸ - è¯·å‹¿ä¿®æ”¹
protected override void Awake()
{
    base.Awake();
    stateFactory = new SkeletonStateFactory();
    stateMachine.Initialize(stateFactory.CreateMoveState(this, stateMachine));
}
#endregion

#region Observer Pattern - Member4
// æˆå‘˜4çš„ä¿®æ”¹åŒºåŸŸ - è¯·å‹¿ä¿®æ”¹
EventManager.Instance.Notify(GameEventType.PlayerDamaged, ...);
#endregion
```

#### ç­–ç•¥Dï¼šæŒ‰é¡ºåºå®Œæˆï¼ˆæœ‰ä¾èµ–å…³ç³»æ—¶ï¼‰
- **æˆå‘˜2ï¼ˆå·¥å‚æ–¹æ³•ï¼‰** â†’ å…ˆå®Œæˆ
- **æˆå‘˜3ï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰** â†’ ç­‰æˆå‘˜2å®Œæˆå
- **æˆå‘˜1ï¼ˆä¾èµ–æ³¨å…¥ï¼‰** â†’ æœ€åå®Œæˆï¼ˆDay 6ï¼‰

---

## ğŸ”§ å„æˆå‘˜ä¿®æ”¹ç­–ç•¥

### æˆå‘˜1
- **è®¿é—®è€…**ï¼šä½¿ç”¨æ‰©å±•æ–¹æ³•ï¼Œä¸ç›´æ¥ä¿®æ”¹Entityç±»
- **ä¾èµ–æ³¨å…¥**ï¼šæœ€åå®Œæˆï¼ˆDay 6ï¼‰ï¼Œæˆ–ä½¿ç”¨å·¥å‚æ¨¡å¼
- **æœåŠ¡å®šä½å™¨**ï¼šå®Œå…¨ç‹¬ç«‹ï¼Œåˆ›å»ºæ–°ç±»

### æˆå‘˜2
- **å·¥å‚æ–¹æ³•**ï¼šåªä¿®æ”¹`Awake()`æ–¹æ³•ï¼Œç”¨`#region`æ ‡è®°
- **é€‚é…å™¨**ï¼šåˆ›å»ºæ–°æ–‡ä»¶ï¼Œåªä¿®æ”¹`SkillManager`æ³¨å†Œéƒ¨åˆ†
- **æŠ½è±¡å·¥å‚**ï¼šåŸºäºè‡ªå·±çš„å·¥å‚æ–¹æ³•æ‰©å±•

### æˆå‘˜3
- **è£…é¥°å™¨**ï¼šåˆ›å»ºæ–°ç›®å½•ï¼Œå°½é‡ä¸ä¿®æ”¹ç°æœ‰æŠ€èƒ½ç±»
- **ç­–ç•¥**ï¼šåªä¿®æ”¹`CharacterStats.DoDamage()`æ–¹æ³•ï¼Œç”¨`#region`æ ‡è®°
- **æ¨¡æ¿æ–¹æ³•**ï¼šç­‰æˆå‘˜2å®Œæˆåï¼Œåˆ›å»ºæ–°åŸºç±»

### æˆå‘˜4
- **è§‚å¯Ÿè€…**ï¼šåªæ·»åŠ äº‹ä»¶å‘å¸ƒä»£ç ï¼Œç”¨`#region`æ ‡è®°ï¼Œä¸ä¿®æ”¹ç°æœ‰é€»è¾‘
- **å‘½ä»¤**ï¼šåˆ›å»º`PlayerInputHandler`ç±»ï¼Œä¸ç›´æ¥ä¿®æ”¹Player.Update
- **ä¸­ä»‹è€…**ï¼šåˆ›å»ºæ–°ç›®å½•ï¼Œä¸ä¿®æ”¹ç°æœ‰UIç±»

### æˆå‘˜5
- **å¯¹è±¡æ± **ï¼šåˆ›å»ºæ–°ç›®å½•ï¼Œé€šè¿‡æ‰©å±•æ–¹æ³•ä½¿ç”¨
- **ä»£ç†**ï¼šåˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¸ä¿®æ”¹ç°æœ‰æŠ€èƒ½ç±»
- **äº«å…ƒ**ï¼šåˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¸ä¿®æ”¹ç°æœ‰ç±»

---

## ğŸ“‹ Gitåˆ†æ”¯ç®¡ç†

### åˆ†æ”¯å‘½åè§„èŒƒ
```
{æˆå‘˜ç¼–å·}-{æ¨¡å¼åç§°}-{ä¼˜å…ˆçº§}
```
**ç¤ºä¾‹**ï¼š`member1-visitor-p0`ã€`member2-factory-p0`ã€`member3-template-p1`

### åˆ†æ”¯ç»“æ„
```
main (åŸå§‹ä»£ç ï¼Œåªè¯»)
â””â”€â”€ develop (å¼€å‘ä¸»åˆ†æ”¯)
    â”œâ”€â”€ P0æ‰¹æ¬¡ï¼ˆå¿…é¡»å®Œæˆï¼‰
    â”‚   â”œâ”€â”€ member1-visitor-p0
    â”‚   â”œâ”€â”€ member2-factory-p0
    â”‚   â”œâ”€â”€ member2-adapter-p0
    â”‚   â”œâ”€â”€ member3-decorator-p0
    â”‚   â”œâ”€â”€ member3-strategy-p0
    â”‚   â””â”€â”€ member4-observer-p0
    â”œâ”€â”€ P1æ‰¹æ¬¡ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
    â”‚   â”œâ”€â”€ member1-service-locator-p1
    â”‚   â”œâ”€â”€ member1-di-p1 (âš ï¸ æœ€ååˆå¹¶)
    â”‚   â”œâ”€â”€ member2-abstract-factory-p1
    â”‚   â”œâ”€â”€ member3-template-p1 (âš ï¸ ä¾èµ–factory-p0)
    â”‚   â””â”€â”€ ...
    â””â”€â”€ P2æ‰¹æ¬¡ï¼ˆå¯é€‰ï¼‰
```

### åˆå¹¶é¡ºåºï¼ˆé¿å…å†²çªï¼‰

#### ç¬¬ä¸€æ‰¹ï¼ˆDay 2-3ï¼‰ï¼šP0ç‹¬ç«‹ä»»åŠ¡
```bash
git checkout develop
git merge --no-ff member1-visitor-p0
git merge --no-ff member2-factory-p0
git merge --no-ff member2-adapter-p0
git merge --no-ff member3-decorator-p0
git merge --no-ff member3-strategy-p0
git merge --no-ff member4-observer-p0
git push origin develop
```

#### ç¬¬äºŒæ‰¹ï¼ˆDay 4ï¼‰ï¼šP1ç‹¬ç«‹ä»»åŠ¡
```bash
git checkout develop
git pull origin develop
git merge --no-ff member1-service-locator-p1
git merge --no-ff member2-prototype-p1
git merge --no-ff member3-facade-p1
git merge --no-ff member4-mediator-p1
git merge --no-ff member5-object-pool-p1
git merge --no-ff member5-proxy-p1
git push origin develop
```

#### ç¬¬ä¸‰æ‰¹ï¼ˆDay 5ï¼‰ï¼šP1ä¾èµ–ä»»åŠ¡
```bash
git checkout develop
git pull origin develop
git merge --no-ff member2-abstract-factory-p1  # ä¾èµ–factory-p0
git merge --no-ff member3-template-p1         # ä¾èµ–factory-p0
git merge --no-ff member4-command-p1
git push origin develop
```

#### æœ€åï¼ˆDay 6ï¼‰ï¼šä¾èµ–æ³¨å…¥
```bash
git checkout develop
git pull origin develop
git merge --no-ff member1-di-p1  # âš ï¸ æœ€ååˆå¹¶
git push origin develop
```

---

## ğŸ”¨ æ—¥å¸¸æ“ä½œæµç¨‹

### å¼€å§‹å·¥ä½œå‰
```bash
# 1. åˆ‡æ¢åˆ°è‡ªå·±çš„åˆ†æ”¯
git checkout member2-factory-p0

# 2. æ‹‰å–æœ€æ–°ä»£ç ï¼ˆä»developï¼‰
git pull origin develop
# å¦‚æœæœ‰å†²çªï¼Œå…ˆè§£å†³å†²çª

# 3. å¼€å§‹å·¥ä½œ
```

### æäº¤ä»£ç 
```bash
# 1. æŸ¥çœ‹ä¿®æ”¹
git status
git diff

# 2. æ·»åŠ å¹¶æäº¤
git add .
git commit -m "Refactored with Factory Method Pattern (P0)
- Created EnemyStateFactory
- Modified Enemy.Awake() with #region marker
- Added refactoring comments"

# 3. æ¨é€
git push origin member2-factory-p0
```

### åˆå¹¶åˆ°develop
```bash
# 1. ç¡®ä¿åˆ†æ”¯æ˜¯æœ€æ–°çš„
git checkout member2-factory-p0
git pull origin develop

# 2. åˆ‡æ¢åˆ°developå¹¶åˆå¹¶
git checkout develop
git pull origin develop
git merge --no-ff member2-factory-p0

# 3. è§£å†³å†²çªï¼ˆå¦‚æœæœ‰ï¼‰
# 4. æµ‹è¯•
# 5. æ¨é€
git push origin develop
```

---

## âš ï¸ å†²çªå¤„ç†æµç¨‹

### å‘ç°å†²çªæ—¶
```bash
git checkout develop
git merge member2-factory-p0
# è¾“å‡ºï¼šCONFLICT (content): Merge conflict in Player.cs
```

### è§£å†³å†²çª
1. **æ‰“å¼€å†²çªæ–‡ä»¶**ï¼ŒæŸ¥çœ‹å†²çªæ ‡è®°ï¼š
```csharp
<<<<<<< HEAD (developåˆ†æ”¯çš„ä»£ç )
æˆå‘˜4çš„è§‚å¯Ÿè€…æ¨¡å¼ä»£ç 
=======
æˆå‘˜2çš„å·¥å‚æ–¹æ³•ä»£ç 
>>>>>>> member2-factory-p0
```

2. **ä¿ç•™åŒæ–¹çš„ä¿®æ”¹**ï¼Œä½¿ç”¨`#region`æ ‡è®°ï¼š
```csharp
// ä¿ç•™æˆå‘˜4çš„è§‚å¯Ÿè€…ä»£ç 
#region Observer Pattern - Member4
EventManager.Instance.Notify(GameEventType.PlayerDamaged, ...);
#endregion

// ä¿ç•™æˆå‘˜2çš„å·¥å‚æ–¹æ³•ä»£ç ï¼ˆå¦‚æœæœ‰ï¼‰
#region Factory Method Pattern - Member2
// æˆå‘˜2çš„ä»£ç 
#endregion
```

3. **æ ‡è®°å†²çªå·²è§£å†³**ï¼š
```bash
git add Player.cs
git commit -m "Merge member2-factory-p0: Resolved conflicts in Player.cs"
```

---

## ğŸ¯ å†²çªé¢„é˜²æ£€æŸ¥æ¸…å•

### ä¿®æ”¹å‰
- [ ] ç¡®è®¤è¦ä¿®æ”¹çš„æ–‡ä»¶æ²¡æœ‰è¢«å…¶ä»–æˆå‘˜ä¿®æ”¹
- [ ] ä½¿ç”¨Gitæ£€æŸ¥æ–‡ä»¶çŠ¶æ€ï¼š`git status`
- [ ] ä¸å›¢é˜Ÿæˆå‘˜æ²Ÿé€šä¿®æ”¹èŒƒå›´

### ä¿®æ”¹æ—¶
- [ ] ä¼˜å…ˆåˆ›å»ºæ–°æ–‡ä»¶/æ–°ç›®å½•
- [ ] ä½¿ç”¨æ‰©å±•æ–¹æ³•æˆ–åŒ…è£…ç±»
- [ ] ä½¿ç”¨`#region`æ ‡è®°ä¿®æ”¹åŒºåŸŸ
- [ ] æ·»åŠ é‡æ„æ³¨é‡Šè¯´æ˜ä¿®æ”¹èŒƒå›´
- [ ] ä¸åˆ é™¤æˆ–å¤§å¹…ä¿®æ”¹å…¶ä»–æˆå‘˜çš„ä»£ç 

### åˆå¹¶å‰
- [ ] æ£€æŸ¥æ˜¯å¦æœ‰å†²çªï¼š`git merge --no-commit --no-ff <branch>`
- [ ] å¦‚æœæœ‰å†²çªï¼Œå…ˆæ²Ÿé€šå†åˆå¹¶
- [ ] æŒ‰ç…§åˆå¹¶é¡ºåºè¿›è¡Œ
- [ ] æµ‹è¯•åŠŸèƒ½æ­£å¸¸

---

## ğŸ“Œ ä»£ç æ ‡è®°è§„èŒƒ

æ‰€æœ‰é‡æ„ä»£ç å¿…é¡»æ·»åŠ æ ‡è®°ï¼š
```csharp
// ========== Refactored with XXX Pattern ==========
// ä¼˜å…ˆçº§ï¼šP0/P1/P2
// é‡æ„äººå‘˜ï¼šæˆå‘˜X
// ä¿®æ”¹åŒºåŸŸï¼š[å…·ä½“æ–¹æ³•åæˆ–åŒºåŸŸ]
// æ³¨æ„ï¼šæ­¤åŒºåŸŸç”±æˆå‘˜Xè´Ÿè´£ï¼Œå…¶ä»–æˆå‘˜è¯·å‹¿ä¿®æ”¹
// ============================================================

#region Factory Method Pattern - Member2
// æˆå‘˜2çš„ä¿®æ”¹åŒºåŸŸ
#endregion
```

---

**è¯¦ç»†ä»»åŠ¡åˆ†é…è¯·å‚è€ƒ**ï¼š`doc/åˆ†å·¥æ–¹æ¡ˆ.md`
